// App.js
// -------------------------------------------------- //

$(function() {

    
    var socket = io.connect("http://localhost")
    ,   $todo  = $("[name='todo[task]']");
    

    $("#new-todo-form").submit(function(e) {
        e.preventDefault();
        socket.emit("newTodo", { task: $todo.val() });
    });

    
    socket.on("newTodo", function (data) {
        $todo.val("").focus();
        $("#todo").append("<li><label for='" + data._id + "'><input type='checkbox' id='" + data._id + "' name='" + data._id + "' /> " + data.task + "</label></li>");
    });


    $("input[type='checkbox']").live("change", function() {
        socket.emit("complete", { "_id": $(this).attr("id") });
    });

    
    socket.on("update-list", function(data) {
        console.log("update");
        $("#" + data._id).parent().fadeOut();
    });


});